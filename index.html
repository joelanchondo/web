<!-- Reemplaza TODO el <script> de música por este código mejorado -->
<script>
  const audio = new Audio('yo-te-esperaba.mp3');
  audio.loop = true;
  
  // Estrategia de autoplay mejorada
  function iniciarMusica() {
    // Intenta reproducir inmediatamente (funciona en desktop)
    const promesa = audio.play();
    
    // Maneja el error si el autoplay está bloqueado
    if (promesa !== undefined) {
      promesa.catch(() => {
        // Crea un botón invisible que cubre toda la pantalla
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100vw';
        overlay.style.height = '100vh';
        overlay.style.zIndex = '9998';
        overlay.style.opacity = '0';
        overlay.id = 'music-overlay';
        
        overlay.onclick = () => {
          audio.play();
          overlay.remove();
          document.getElementById('music-fallback-btn')?.remove();
        };
        
        document.body.appendChild(overlay);
        
        // Muestra instrucción discreta en móviles
        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
          const btn = document.createElement('div');
          btn.id = 'music-fallback-btn';
          btn.style.position = 'fixed';
          btn.style.bottom = '20px';
          btn.style.right = '20px';
          btn.style.background = 'rgba(25, 118, 210, 0.9)';
          btn.style.color = 'white';
          btn.style.padding = '10px 15px';
          btn.style.borderRadius = '20px';
          btn.style.zIndex = '9999';
          btn.style.fontSize = '14px';
          btn.style.cursor = 'pointer';
          btn.textContent = 'Toca para música ▶️';
          btn.onclick = () => {
            audio.play();
            btn.remove();
            document.getElementById('music-overlay')?.remove();
          };
          document.body.appendChild(btn);
        }
      });
    }
  }

  // Intenta iniciar la música al cargar (con retraso para mejor compatibilidad)
  window.addEventListener('load', () => {
    setTimeout(iniciarMusica, 500);
  });

  // También al hacer clic/touch en cualquier lugar (para móviles)
  document.addEventListener('click', iniciarMusica, { once: true });
  document.addEventListener('touchstart', iniciarMusica, { once: true });
</script>
